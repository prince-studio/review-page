<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Suggested Review</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  body{
    margin:0;
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
    background:#f5f7f8;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
  }
  .wrap{
    width:100%;
    max-width:420px;
    text-align:center;
    padding:24px;
  }
  h1{
    margin:0 0 16px;
    color:#198754;
    font-size:26px;
  }
  .review-box{
    background:#ffffff;
    border-radius:12px;
    padding:18px 16px;
    min-height:90px;
    box-shadow:0 4px 14px rgba(0,0,0,0.06);
    font-size:15px;
    line-height:1.5;
    text-align:left;
    color:#9aa0a6;  /* light gray text */
    margin-bottom:18px;
  }
  button{
    width:100%;
    border:none;
    border-radius:999px;
    padding:12px 18px;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    background:#198754;
    color:#fff;
    box-shadow:0 6px 18px rgba(0,0,0,0.18);
    transition:transform .12s ease, box-shadow .12s ease, opacity .12s ease;
  }
  button:hover{
    transform:translateY(-1px);
    box-shadow:0 10px 24px rgba(0,0,0,0.22);
    opacity:.96;
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>Suggested Review</h1>

  <div id="reviewBox" class="review-box">
    Loading review...
  </div>

  <button id="copyBtn">Copy &amp; Open Google</button>
</div>

<script>
  // ⬇️ Yaha apne Apps Script Web App ka URL daalo (exec se end hota hai) ⬇️
  const API_URL = "https://script.google.com/macros/s/AKfycbx579TE5jN8VcMWzrAjzLlaieDpk02zglUH0mmQsEb9NKnQnCz6f33iYRGxcEqnwp-pGw/exec";

  // ⬇️ Yaha apna Google Business 'Write a Review' link daalo ⬇️
  const GOOGLE_REVIEW_URL =
    "https://g.page/r/CVkZtJEDPD28EBM/review";

  const reviewBox = document.getElementById("reviewBox");
  const copyBtn = document.getElementById("copyBtn");

  let currentReviewText = "";

  async function loadReview() {
    try {
      const res = await fetch(API_URL, { cache: "no-store" });
      const data = await res.json();

      currentReviewText = data.text || "";
      reviewBox.textContent = currentReviewText;

      // Admin ke liye: console me dekh sakte ho kaunsa global review number gaya
      console.log("Global review no:", data.index, "fallback:", !!data.fallback);

    } catch (err) {
      console.error("Error loading review:", err);
      reviewBox.textContent = "Review text load nahi ho paaya. Thodi der baad phir try karein.";
    }
  }

  copyBtn.addEventListener("click", async () => {
    if (!currentReviewText) return;

    // ✅ Copy to clipboard
    try {
      await navigator.clipboard.writeText(currentReviewText);
    } catch (err) {
      // Fallback old method
      const ta = document.createElement("textarea");
      ta.value = currentReviewText;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
    }

    // ✅ Google review page open karo (naya tab)
    window.open(GOOGLE_REVIEW_URL, "_blank");
  });

  // Page load hote hi global NEXT review API se text lo
  loadReview();
</script>
</body>
</html>

